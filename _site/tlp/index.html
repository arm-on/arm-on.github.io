<!DOCTYPE html> <html lang="fa"> <head prefix="og: http://ogp.me/ns#"> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="سیمرغ" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="سیمرغ" /> <title> افزایش عمر باتری لپ‌‌تاپ - سیمرغ </title> <link rel="alternate" href="http://localhost:4000/tlp/" hreflang="fa" /> <link rel="canonical" href="http://localhost:4000/tlp/" /> <meta name="description" content="تنظیم آستانه شارژ باتری در گنو/لینوکس" /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="افزایش عمر باتری لپ‌‌تاپ | " /> <meta property="og:title" content="افزایش عمر باتری لپ‌‌تاپ | " /> <meta property="og:type" content="website" /> <meta property="og:url" content="http://localhost:4000/tlp/" /> <meta property="og:description" content="تنظیم آستانه شارژ باتری در گنو/لینوکس" /> <meta property="og:image" content="http://localhost:4000/assets/img/ogp.png" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="افزایش عمر باتری لپ‌‌تاپ | your_twitter_username" /> <meta name="twitter:url" content="http://localhost:4000/tlp/" /> <meta name="twitter:site" content="@your_twitter_username" /> <meta name="twitter:creator" content="@your_twitter_username" /> <meta name="twitter:description" content="تنظیم آستانه شارژ باتری در گنو/لینوکس" /> <meta name="twitter:image" content="http://localhost:4000/assets/img/ogp.png" /> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="سیمرغ" /> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="Jekyll Klise" /> <meta name="application-name" content="Jekyll Klise" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/assets/css/style.css" /> </head> <body data-theme="dark" class="notransition"> <script> const body = document.body; const data = body.getAttribute("data-theme"); const initTheme = (state) => { if (state === "dark") { body.setAttribute("data-theme", "dark"); } else if (state === "light") { body.removeAttribute("data-theme"); } else { localStorage.setItem("theme", data); } }; initTheme(localStorage.getItem("theme")); setTimeout(() => body.classList.remove("notransition"), 75); </script> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger"> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 512 512"> <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z"></path> </svg> </span> </label> <a id="mode"> <svg class="mode-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 512 512"> <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></circle> </svg> <svg class="mode-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 512 512"> <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></line> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px"></circle> </svg> </a> <div class="trigger"> <div class="trigger-container">
<a class="menu-link" href="/"> <b><i class="fa fa-home"> <span class="fa-icon-text"> خانه</span> </i></b> </a><a class="menu-link" href="/archive/"> <b><i class="fa fa-archive"> <span class="fa-icon-text"> بایگانی</span> </i></b> </a><a class="menu-link" href="/tags/"> <b><i class="fa fa-tag"> <span class="fa-icon-text"> برچسب‌ها</span> </i></b> </a><a class="menu-link" href="/about/"> <b><i class="fa fa-address-card"> <span class="fa-icon-text"> درباره</span> </i></b> </a><a class="menu-link rss" href="/feed.xml"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewbox="0 0 512 512" fill="#ED812E"> <title>خوراک</title> <path d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z"></path> <path d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z"></path> <path d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z"></path> </svg> </a> </div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <div class="tags"> <span itemprop="keywords"> <a class="tag" href="/tags/#unix-linux">UNIX/LINUX</a>, <a class="tag" href="/tags/#udev">UDEV</a> </span> </div> <h1 class="header-title" itemprop="headline">افزایش عمر باتری لپ‌‌تاپ</h1> <div class="post-meta"> <time class="header-date" datetime="2020-09-07T23:58:47+04:30" itemprop="datePublished"> 17 شهریور، 1399 </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name">اسم شما</span> </span> <time hidden class="date-modify" datetime="2020-10-23T16:21:30+03:30" itemprop="dateModified"> 17 شهریور، 1399 </time> <span hidden itemprop="publisher" itemtype="Person">اسم شما</span> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><h1 id="باتریهای-لیتیوم-یون">باتری‌های لیتیوم-یون</h1> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <h1 id="باتریهای-لیتیوم-یون"> <a href="#%D8%A8%D8%A7%D8%AA%D8%B1%DB%8C%D9%87%D8%A7%DB%8C-%D9%84%DB%8C%D8%AA%DB%8C%D9%88%D9%85-%DB%8C%D9%88%D9%86" class="anchor-head"></a> باتری‌های لیتیوم-یون </h1> <p>باتری‌های لیتیوم یونی نباید خیلی خالی یا خیلی پر شوند. به این معنی که نباید اجازه داد شارژ آنها کاملا تخلیه شود تا منجر به خاموش شدن دستگاه شوند و همچنین نباید پس از وقتی که شارژشان پر شد، به منبع شارژ متصل بمانند.</p> <p>در حالت ایده‌آل نباید اجازه داد که یک باتری لیتیوم یونی بیش از ۸۰ درصد شارژ شود یا کمتر از ۲۰ درصد تخلیه شود،</p> <p>با توجه به اینکه امروزه همه ما از لپ‌تاپ‌ها بیشتر در حالتی که به شارژر وصل هستند استفاده می‌کنیم و کمتر پیش می‌آید دسترسی و امکان اتصال لپ‌تاپ به برق را نداشته باشیم، پیشنهاد می‌شود برای افزایش طول عمر باتری میزان شارژ آن را حدود ۶۰ درصد نگهداریم.</p> <p>بیشتر برندهای لپ‌تاپهای امروزی روی ویندوز ابزارهای رسمی برای کنترل میزان آستانه شارژ لپ‌تاپ دارند.</p> <h1 id="تنظیم-threshold"> <a href="#%D8%AA%D9%86%D8%B8%DB%8C%D9%85-threshold" class="anchor-head"></a> تنظیم <code class="language-plaintext highlighter-rouge">threshold</code> </h1> <p>کرنل لینوکس هم از ورژن V4.17 و به صورت دقیق‌تر با <a href="https://git.kernel.org/pub/scm/linux/kernel/git/next/linux-next.git/tree/drivers/platform/x86/thinkpad_acpi.c?h=next-20180226#n9216" target="_blank" rel="noopener noreferrer">این پچ</a> یک ماژول رابط کاربری برای کنترل آستانه شارژ باتری‌ها معرفی کرد که در ابتدا برای چند سری از Thinkpadهای شرکت لنوو به صورت آزمایشی فعال شد و در ادامه دستگاه‌های بیشتری را پشتیبانی می‌کند.</p> <p>برای اینکه بدانید آیا لپ‌تاپ شما هم از این پشتیبانی برخوردار است راه‌های مختلفی وجود دارد. ساده‌ترین کار این است که ببینید در مسیر فایل‌های سیستمی مدیریت توان لپ‌تاپ شما، فایلی برای کنترل رفتار آستانه باتری وجود دارد یا خیر. این فایل معمولا با اسم ‎<code class="language-plaintext highlighter-rouge">charge_control_{start,end}_threshold</code>‬ و در مسیر ‎<code class="language-plaintext highlighter-rouge">/sys/class/power_supply/BAT[0-9]</code>‬ قرار دارد.</p> <p>اگر به صورت دستی مقدار این فایل را تغییر دهید، خواهید دید که شارژ شدن باتری در آستانه تعریف شده توسط شما متوقف می‌شود. برای این کار از فرامین <code class="language-plaintext highlighter-rouge">echo</code> و <code class="language-plaintext highlighter-rouge">tee</code> بهره ببرید. آشکار است که برای این کار باید دسترسی روت داشته باشید.</p> <h1 id="استفاده-از-tlp"> <a href="#%D8%A7%D8%B3%D8%AA%D9%81%D8%A7%D8%AF%D9%87-%D8%A7%D8%B2-tlp" class="anchor-head"></a> استفاده از <code class="language-plaintext highlighter-rouge">TLP</code> </h1> <p>برای کنترل آستانه شارژ باطری می‌توانید از <a href="https://github.com/linrunner/TLP" target="_blank" rel="noopener noreferrer">TLP</a> نیز استفاده کنید. اگر این ابزار هنوز از سیستم شما پشتیبانی نمی‌کند و اطمینان دارید که دستگاه شما چنین قابلیتی دارد، می‌توانید با توجه به دستور‌العملی که در <a href="https://github.com/linrunner/TLP/issues/321#issuecomment-581012796" target="_blank" rel="noopener noreferrer">این کامنت</a> آمده عمل کنید و یک <code class="language-plaintext highlighter-rouge">gist</code> بسازید و لینک آن را زیر همین <a href="https://github.com/linrunner/TLP/issues/321#issue" target="_blank" rel="noopener noreferrer"><code class="language-plaintext highlighter-rouge">#issue321&amp;</code></a> کامنت بگذارید تا توسعه‌دهندگان در ویرایش‌های بعد، پشتیبانی از دستگاه شما را هم پیگیری کنند. دقت کنید که پیش از شما مشخصات دستگاهتان ثبت نشده باشد و اسپم نکنید.</p> <p>نمونه خروجی به این شکل خواهد بود :</p> <div class="code-block"> <figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">sudo </span>tlp-stat <span class="nt">-s</span> <span class="nt">-b</span>
<span class="nt">---</span> TLP 1.3.1 <span class="nt">--------------------------------------------</span>

+++ System Info
System         <span class="o">=</span> ASUSTeK COMPUTER INC. 1.0        ZenBook 14 UX410UFR
BIOS           <span class="o">=</span> UX410UFR.201
Kernel         <span class="o">=</span> 5.5.3-arch1-1 <span class="c">#1 SMP PREEMPT Tue, 11 Feb 2020 15:35:41 +0000 x86_64</span>
/proc/cmdline  <span class="o">=</span> <span class="nv">BOOT_IMAGE</span><span class="o">=</span>/vmlinuz-linux <span class="nv">root</span><span class="o">=</span><span class="nv">UUID</span><span class="o">=</span>805eb372-94c7-4e8c-87b4-54b0414fa84a rw <span class="nv">loglevel</span><span class="o">=</span>3 quiet
Init system    <span class="o">=</span> systemd 
Boot mode      <span class="o">=</span> UEFI

+++ TLP Status
State          <span class="o">=</span> enabled
RDW state      <span class="o">=</span> enabled
Last run       <span class="o">=</span> 09:11:45 PM,   1613 sec<span class="o">(</span>s<span class="o">)</span> ago
Mode           <span class="o">=</span> AC
Power <span class="nb">source</span>   <span class="o">=</span> AC

Notice: systemd-rfkill.service is not masked <span class="nt">--</span> invoke <span class="s2">"systemctl mask systemd-rfkill.service"</span> to correct this!
Notice: systemd-rfkill.socket is not masked <span class="nt">--</span> invoke <span class="s2">"systemctl mask systemd-rfkill.socket"</span> to correct this!

+++ Battery Features: Charge Thresholds and Recalibrate
natacpi    <span class="o">=</span> inactive <span class="o">(</span>laptop not supported<span class="o">)</span>
tpacpi-bat <span class="o">=</span> inactive <span class="o">(</span>laptop not supported<span class="o">)</span>
tp-smapi   <span class="o">=</span> inactive <span class="o">(</span>laptop not supported<span class="o">)</span>

+++ Battery Status: BAT0
/sys/class/power_supply/BAT0/manufacturer                   <span class="o">=</span> ASUSTeK
/sys/class/power_supply/BAT0/model_name                     <span class="o">=</span> ASUS Battery
/sys/class/power_supply/BAT0/cycle_count                    <span class="o">=</span>     35
/sys/class/power_supply/BAT0/energy_full_design             <span class="o">=</span>  48336 <span class="o">[</span>mWh]
/sys/class/power_supply/BAT0/energy_full                    <span class="o">=</span>  45474 <span class="o">[</span>mWh]
/sys/class/power_supply/BAT0/energy_now                     <span class="o">=</span>  31327 <span class="o">[</span>mWh]
/sys/class/power_supply/BAT0/power_now                      <span class="o">=</span>      0 <span class="o">[</span>mW]
/sys/class/power_supply/BAT0/status                         <span class="o">=</span> Not charging

Charge                                                      <span class="o">=</span>   68.9 <span class="o">[</span>%]
Capacity                                                    <span class="o">=</span>   94.1 <span class="o">[</span>%]

<span class="c"># **NOTE**</span>
<span class="c"># (I manually set the charge_control_end_threshold t0 60)</span>

<span class="nv">$ </span><span class="nb">grep</span> <span class="s1">'.*'</span> /sys/class/power_supply/BAT?/<span class="k">*</span>
/sys/class/power_supply/BAT0/alarm:4833000
/sys/class/power_supply/BAT0/capacity:68
/sys/class/power_supply/BAT0/capacity_level:Normal
/sys/class/power_supply/BAT0/charge_control_end_threshold:60
/sys/class/power_supply/BAT0/cycle_count:35
/sys/class/power_supply/BAT0/energy_full:45474000
/sys/class/power_supply/BAT0/energy_full_design:48336000
/sys/class/power_supply/BAT0/energy_now:31327000
/sys/class/power_supply/BAT0/manufacturer:ASUSTeK
/sys/class/power_supply/BAT0/model_name:ASUS Battery
/sys/class/power_supply/BAT0/power_now:0
/sys/class/power_supply/BAT0/present:1
/sys/class/power_supply/BAT0/serial_number: 
/sys/class/power_supply/BAT0/status:Not charging
/sys/class/power_supply/BAT0/technology:Li-ion
/sys/class/power_supply/BAT0/type:Battery
/sys/class/power_supply/BAT0/uevent:POWER_SUPPLY_NAME<span class="o">=</span>BAT0
/sys/class/power_supply/BAT0/uevent:POWER_SUPPLY_STATUS<span class="o">=</span>Not charging
/sys/class/power_supply/BAT0/uevent:POWER_SUPPLY_PRESENT<span class="o">=</span>1
/sys/class/power_supply/BAT0/uevent:POWER_SUPPLY_TECHNOLOGY<span class="o">=</span>Li-ion
/sys/class/power_supply/BAT0/uevent:POWER_SUPPLY_CYCLE_COUNT<span class="o">=</span>35
/sys/class/power_supply/BAT0/uevent:POWER_SUPPLY_VOLTAGE_MIN_DESIGN<span class="o">=</span>11400000
/sys/class/power_supply/BAT0/uevent:POWER_SUPPLY_VOLTAGE_NOW<span class="o">=</span>11400000
/sys/class/power_supply/BAT0/uevent:POWER_SUPPLY_POWER_NOW<span class="o">=</span>0
/sys/class/power_supply/BAT0/uevent:POWER_SUPPLY_ENERGY_FULL_DESIGN<span class="o">=</span>48336000
/sys/class/power_supply/BAT0/uevent:POWER_SUPPLY_ENERGY_FULL<span class="o">=</span>45474000
/sys/class/power_supply/BAT0/uevent:POWER_SUPPLY_ENERGY_NOW<span class="o">=</span>31327000
/sys/class/power_supply/BAT0/uevent:POWER_SUPPLY_CAPACITY<span class="o">=</span>68
/sys/class/power_supply/BAT0/uevent:POWER_SUPPLY_CAPACITY_LEVEL<span class="o">=</span>Normal
/sys/class/power_supply/BAT0/uevent:POWER_SUPPLY_MODEL_NAME<span class="o">=</span>ASUS Battery
/sys/class/power_supply/BAT0/uevent:POWER_SUPPLY_MANUFACTURER<span class="o">=</span>ASUSTeK
/sys/class/power_supply/BAT0/uevent:POWER_SUPPLY_SERIAL_NUMBER<span class="o">=</span> 
/sys/class/power_supply/BAT0/voltage_min_design:11400000
/sys/class/power_supply/BAT0/voltage_now:11400000</code></pre></figure> </div> <p>و برای <code class="language-plaintext highlighter-rouge">udevadm test</code>:</p> <div class="code-block"> <figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>udevadm <span class="nb">test</span> /devices/LNXSYSTM:00/LNXSYBUS:00/PNP0A08:00/device:19/PNP0C09:01/PNP0C0A:03/power_supply/BAT0
This program is <span class="k">for </span>debugging only, it does not run any program
specified by a RUN key. It may show incorrect results, because
some values may be different, or not available at a simulation run.

Load module index
Parsed configuration file /usr/lib/systemd/network/99-default.link
Created <span class="nb">link </span>configuration context.
Reading rules file: /usr/lib/udev/rules.d/01-md-raid-creating.rules
Reading rules file: /usr/lib/udev/rules.d/10-dm.rules
Reading rules file: /usr/lib/udev/rules.d/11-dm-lvm.rules
Reading rules file: /usr/lib/udev/rules.d/13-dm-disk.rules
Reading rules file: /usr/lib/udev/rules.d/39-usbmuxd.rules
Reading rules file: /usr/lib/udev/rules.d/40-usb-media-players.rules
Reading rules file: /usr/lib/udev/rules.d/50-udev-default.rules
Reading rules file: /usr/lib/udev/rules.d/60-autosuspend-chromiumos.rules
Reading rules file: /usr/lib/udev/rules.d/60-block.rules
Reading rules file: /usr/lib/udev/rules.d/60-cdrom_id.rules
Reading rules file: /usr/lib/udev/rules.d/60-drm.rules
Reading rules file: /usr/lib/udev/rules.d/60-evdev.rules
Reading rules file: /usr/lib/udev/rules.d/60-fido-id.rules
Reading rules file: /usr/lib/udev/rules.d/60-input-id.rules
Reading rules file: /usr/lib/udev/rules.d/60-persistent-alsa.rules
Reading rules file: /usr/lib/udev/rules.d/60-persistent-input.rules
Reading rules file: /usr/lib/udev/rules.d/60-persistent-storage-tape.rules
Reading rules file: /usr/lib/udev/rules.d/60-persistent-storage.rules
Reading rules file: /usr/lib/udev/rules.d/60-persistent-v4l.rules
Reading rules file: /usr/lib/udev/rules.d/60-rfkill.rules
Reading rules file: /usr/lib/udev/rules.d/60-sensor.rules
Reading rules file: /usr/lib/udev/rules.d/60-serial.rules
Reading rules file: /usr/lib/udev/rules.d/61-autosuspend-manual.rules
Reading rules file: /usr/lib/udev/rules.d/63-md-raid-arrays.rules
Reading rules file: /usr/lib/udev/rules.d/64-btrfs-dm.rules
Reading rules file: /usr/lib/udev/rules.d/64-btrfs.rules
Reading rules file: /usr/lib/udev/rules.d/64-md-raid-assembly.rules
Reading rules file: /usr/lib/udev/rules.d/65-libwacom.rules
Reading rules file: /usr/lib/udev/rules.d/69-cd-sensors.rules
Reading rules file: /usr/lib/udev/rules.d/69-dm-lvm-metad.rules
Reading rules file: /usr/lib/udev/rules.d/69-libmtp.rules
Reading rules file: /usr/lib/udev/rules.d/69-md-clustered-confirm-device.rules
Reading rules file: /usr/lib/udev/rules.d/70-infrared.rules
Reading rules file: /usr/lib/udev/rules.d/70-joystick.rules
Reading rules file: /usr/lib/udev/rules.d/70-mouse.rules
Reading rules file: /usr/lib/udev/rules.d/70-power-switch.rules
Reading rules file: /usr/lib/udev/rules.d/70-touchpad.rules
Reading rules file: /usr/lib/udev/rules.d/70-uaccess.rules
Reading rules file: /usr/lib/udev/rules.d/71-seat.rules
Reading rules file: /usr/lib/udev/rules.d/73-seat-late.rules
Reading rules file: /usr/lib/udev/rules.d/75-net-description.rules
Reading rules file: /usr/lib/udev/rules.d/75-probe_mtd.rules
Reading rules file: /usr/lib/udev/rules.d/78-sound-card.rules
Reading rules file: /usr/lib/udev/rules.d/80-drivers.rules
Reading rules file: /usr/lib/udev/rules.d/80-libinput-device-groups.rules
Reading rules file: /usr/lib/udev/rules.d/80-net-setup-link.rules
Reading rules file: /usr/lib/udev/rules.d/80-udisks2.rules
Reading rules file: /usr/lib/udev/rules.d/84-nm-drivers.rules
Reading rules file: /usr/lib/udev/rules.d/85-nm-unmanaged.rules
Reading rules file: /usr/lib/udev/rules.d/85-tlp.rules
Reading rules file: /usr/lib/udev/rules.d/89-alsa-ucm.rules
Reading rules file: /usr/lib/udev/rules.d/90-alsa-restore.rules
Reading rules file: /usr/lib/udev/rules.d/90-backlight.rules
Reading rules file: /usr/lib/udev/rules.d/90-brightnessctl.rules
Reading rules file: /usr/lib/udev/rules.d/90-libinput-fuzz-override.rules
Reading rules file: /usr/lib/udev/rules.d/90-nm-thunderbolt.rules
Reading rules file: /usr/lib/udev/rules.d/90-pulseaudio.rules
Reading rules file: /usr/lib/udev/rules.d/90-vconsole.rules
Reading rules file: /usr/lib/udev/rules.d/95-cd-devices.rules
Reading rules file: /usr/lib/udev/rules.d/95-dm-notify.rules
Reading rules file: /usr/lib/udev/rules.d/95-upower-csr.rules
Reading rules file: /usr/lib/udev/rules.d/95-upower-hid.rules
Reading rules file: /usr/lib/udev/rules.d/95-upower-hidpp.rules
Reading rules file: /usr/lib/udev/rules.d/95-upower-wup.rules
Reading rules file: /usr/lib/udev/rules.d/96-e2scrub.rules
Reading rules file: /usr/lib/udev/rules.d/99-fuse.rules
Reading rules file: /usr/lib/udev/rules.d/99-fuse3.rules
Reading rules file: /usr/lib/udev/rules.d/99-systemd.rules
Reading rules file: /etc/udev/rules.d/99_battery_threshold.rules
BAT0: /etc/udev/rules.d/99_battery_threshold.rules:1 Failed to write ATTR<span class="o">{</span>/sys/devices/LNXSYSTM:00/LNXSYBUS:00/PNP0A08:00/device:19/PNP0C09:01/PNP0C0A:03/power_supply/BAT0/charge_control_end_threshold<span class="o">}</span>, ignoring: Permission denied
<span class="nv">DEVPATH</span><span class="o">=</span>/devices/LNXSYSTM:00/LNXSYBUS:00/PNP0A08:00/device:19/PNP0C09:01/PNP0C0A:03/power_supply/BAT0
<span class="nv">POWER_SUPPLY_NAME</span><span class="o">=</span>BAT0
<span class="nv">POWER_SUPPLY_STATUS</span><span class="o">=</span>Not charging
<span class="nv">POWER_SUPPLY_PRESENT</span><span class="o">=</span>1
<span class="nv">POWER_SUPPLY_TECHNOLOGY</span><span class="o">=</span>Li-ion
<span class="nv">POWER_SUPPLY_CYCLE_COUNT</span><span class="o">=</span>35
<span class="nv">POWER_SUPPLY_VOLTAGE_MIN_DESIGN</span><span class="o">=</span>11400000
<span class="nv">POWER_SUPPLY_VOLTAGE_NOW</span><span class="o">=</span>11400000
<span class="nv">POWER_SUPPLY_POWER_NOW</span><span class="o">=</span>0
<span class="nv">POWER_SUPPLY_ENERGY_FULL_DESIGN</span><span class="o">=</span>48336000
<span class="nv">POWER_SUPPLY_ENERGY_FULL</span><span class="o">=</span>45349000
<span class="nv">POWER_SUPPLY_ENERGY_NOW</span><span class="o">=</span>35260000
<span class="nv">POWER_SUPPLY_CAPACITY</span><span class="o">=</span>77
<span class="nv">POWER_SUPPLY_CAPACITY_LEVEL</span><span class="o">=</span>Normal
<span class="nv">POWER_SUPPLY_MODEL_NAME</span><span class="o">=</span>ASUS Battery
<span class="nv">POWER_SUPPLY_MANUFACTURER</span><span class="o">=</span>ASUSTeK
<span class="nv">POWER_SUPPLY_SERIAL_NUMBER</span><span class="o">=</span>
<span class="nv">ACTION</span><span class="o">=</span>add
<span class="nv">SUBSYSTEM</span><span class="o">=</span>power_supply
<span class="nv">USEC_INITIALIZED</span><span class="o">=</span>1882376914
Unload module index
Unloaded <span class="nb">link </span>configuration context.</code></pre></figure> </div> <h1 id="تنظیم-آستانه-شارژ-با-udev"> <a href="#%D8%AA%D9%86%D8%B8%DB%8C%D9%85-%D8%A2%D8%B3%D8%AA%D8%A7%D9%86%D9%87-%D8%B4%D8%A7%D8%B1%DA%98-%D8%A8%D8%A7-udev" class="anchor-head"></a> تنظیم آستانه شارژ با <code class="language-plaintext highlighter-rouge">udev</code> </h1> <p>چنانچه می‌خواهید همواره با بوت شدن سیستم‌ آستانه شارژ روی مقدار مشخصی تنظیم شود می‌توانید با افزودن <code class="language-plaintext highlighter-rouge">udev rule</code> و تنظیم مقدار <code class="language-plaintext highlighter-rouge">threshold</code> در زمان بوت شدن سیستم این کار را انجام دهید.</p> <p>برای انجام این کار می‌بایست یک فایل جدید با پسوند ‎<code class="language-plaintext highlighter-rouge">.ruls</code>‬ در مسیر ‎<code class="language-plaintext highlighter-rouge">/etc/udev/rules.d</code>‬ بسازید.</p> <p>تنظیمات فایل من به این صورت است:</p> <div class="code-block"> <figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span><span class="nb">cat</span> /etc/udev/rules.d/99_battery_threshold.rules
<span class="nv">KERNEL</span><span class="o">==</span><span class="s2">"BAT[0-9]"</span>, <span class="nv">SUBSYSTEM</span><span class="o">==</span><span class="s2">"power_supply"</span>, ATTR<span class="o">{</span>charge_control_end_threshold<span class="o">}=</span><span class="s2">"60"</span></code></pre></figure> </div> <p>برای درک بیشتر <code class="language-plaintext highlighter-rouge">udev</code> و چگونگی استفاده از آن برای ارتباط با ماژول‌های کرنل می‌توانید به این صفحه در <a href="https://wiki.archlinux.org/index.php/Udev#udev_rule_example" target="_blank" rel="noopener noreferrer">ویکی آرچ لینوکس</a> مراجعه کنید.</p> </div> </article> </main> <small class="post-updated-at">به روز رسانی در 02 آبان، 1399 </small> <nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/simorq/"> <div class="nav-arrow">کهنه‌تر</div> <span class="post-title">سیمرغ</span> </a> </nav> <footer class="footer"> <!-- <a class="footer_item" href="/thanks">سپاس</a> --> <a class="footer item" href="https://twitter.com/your_twitter_username" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter-square"></i> توئیت‌ها </a> <a class="footer item" href="https://github.com/your_github_username" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> گیت‌هاب </a> <a class="footer item" href="https://your_instance.address/@your_username" target="_blank" rel="noopener noreferrer"> <i class="fab fa-mastodon"></i> mastodon </a> <a class="footer item" href="https://your_instance.address/@your_username" target="_blank" rel="noopener noreferrer"> <i class="fa fa-video"></i> لایبرری </a> <a class="footer item" href="https://your_instance.address/your_username" target="_blank" rel="noopener noreferrer"> <i class="fa fa-camera"></i> پیکسلفد </a> <a class="footer item" href="/feed.xml"> <i class="fa fa-rss"></i> خوراک </a> <a class="footer item" href="mailto:your@email.address"> <i class="fa fa-envelope-open"></i> تماس </a> <!-- <a class="footer_item" href="javascript::void(0)">رزومه</a> <span class="footer_item">&copy; 2024</span> --> <small class="footer_copyright"> <small id="license"> <i class="fab fa-creative-commons"></i> مطالب این وبلاگ تحت مجوز <a rel="license noopener noreferrer" href="http://creativecommons.org/licenses/by/4.0/deed.fa" target="_blank"> کریتیو کامنز اتریبیوشن ۴.۰ اینترنشنال </a>قرار دارد. </small> <!-- simorq Theme: https://github.com/mhdzli/simorq تم <a href="https://github.com/mhdzli/simorq" target="_blank" rel="noreferrer noopener" > سیمرغ </a> نیرو گرفته از <a href="https://jekyllrb.com" target="_blank" rel="noreferrer noopener"> jekyll </a> --> </small> </footer> <script src="/assets/js/jquery-3.3.1.min.js"></script> <script src="/assets/js/persianumber.js"></script> <script> $(document).ready(function(){ $('.post-item-date').persiaNumber(); $('.archive-date').persiaNumber(); $('.recent-date').persiaNumber(); $('.post-updated-at').persiaNumber(); $('.date-modify').persiaNumber(); $('.header-date').persiaNumber(); }); </script> <script src="/assets/js/main.js" defer></script> </div> </body> </html>
